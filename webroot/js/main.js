/**
 * @project       tusk
 * @author        carsten.coull@swu.de
 * @build         Wed, Jan 17, 2024 5:40 PM ET
 * @release       1e0fae1f59becf930a7b661a138638fdc341b5c8 [dev]
 * @copyright     Copyright (c) 2024, SWU Stadtwerke Ulm / Neu-Ulm GmbH
 *
 */
import Nav from"/js/vendor/nav.js";import FlashMessages from"/js/vendor/flash-messages.js";import LightBox from"/js/vendor/light-box.js";import Overlay from"/js/vendor/overlay.js";class MAIN{constructor(){this.debug=!1,document.addEventListener("DOMContentLoaded",(()=>this.init())),window.onload=()=>this.pageInit()}init(){this.debug,document.body.classList.add("page-has-loaded");const t=window.innerWidth-document.body.clientWidth;document.body.style.setProperty("--scrollbarWidth",t+"px"),window.addEventListener("resize",(()=>this.throttle(this.resizeHandler)),{passive:!0}),window.addEventListener("scroll",(()=>this.throttle(this.scrollHandler)),{passive:!0})}pageInit(){if(this.debug,document.body.classList.add("page-has-rendered"),this.header=document.querySelector("header"),this.header){let t=this.header.getBoundingClientRect();this.headerBottom=t.top+t.height}this.main()}main(){this.Nav=new Nav(this),this.FlashMessages=new FlashMessages(this),this.Overlay=new Overlay(this,{closeButtonIcon:"/icon/cross.svg",closeButtonTitle:"Close Overlay"}),this.LightBox=new LightBox(this,{selector:"#main img",prevTitle:"zum vorherigem Bild",nextTitle:"zum nÃ¤chsten Bild",prevIcon:"/icon/chevron-left.svg",nextIcon:"/icon/chevron-right.svg"})}scrollHandler(){let t=window.scrollY;this.debug,document.body.classList.toggle("has-scrolled",t>0),document.body.classList.toggle("has-scrolled-a-bit",t>30),document.body.classList.toggle("has-scrolled-past-header",t>this.headerBottom),document.body.classList.toggle("has-scrolled-100vh",t>window.innerHeight),this.lastScrollPosition&&(document.body.classList.toggle("has-scrolled-up",t<this.lastScrollPosition),document.body.classList.toggle("has-scrolled-down",t>this.lastScrollPosition)),this.lastScrollPosition=t}resizeHandler(){let t=window.innerWidth,e=window.innerHeight;this.debug,document.body.style.setProperty("--window-width",`${t}px`),document.body.style.setProperty("--window-height",`${e}px`)}throttle(t){this.ticking=!1,this.ticking||(window.requestAnimationFrame((()=>{t.call(this),this.ticking=!1})),this.ticking=!0)}onOutsideClick(t,e){document.addEventListener("click",(s=>{var i=s.target.parentNode.closest(t);null==i&&document.querySelector(t)!=s.target&&e(s,i)}))}hideElement(){}}new MAIN;